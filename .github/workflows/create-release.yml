name: Create Release

on:
  workflow_dispatch:
    inputs:
      tag:
        description: 'Release tag (e.g., v0.1.0)'
        required: true
        default: 'v0.1.0'
      release_name:
        description: 'Release name'
        required: true
        default: 'Silk Spool v0.1.0 - Beta Release'
      prerelease:
        description: 'Mark as prerelease'
        type: boolean
        default: true

jobs:
  create-release:
    runs-on: ubuntu-latest
    
    steps:
    - name: Checkout repository
      uses: actions/checkout@v4
      
    - name: Download all artifacts
      uses: actions/download-artifact@v4
      with:
        path: ./artifacts
        
    - name: Create Release
      uses: softprops/action-gh-release@v1
      with:
        tag_name: ${{ github.event.inputs.tag }}
        name: ${{ github.event.inputs.release_name }}
        body: |
          ## 🎉 Silk Spool ${{ github.event.inputs.tag }} - Beta Release
          
          This is a beta release of Silk Spool, a beautiful mod manager for Hollow Knight: Silksong!
          
          ### ✨ Key Features
          - **🎮 Automatic Setup**: Smart detection of Hollow Knight: Silksong and BepInEx installations
          - **📚 Mod Discovery**: Browse mods from multiple repositories with advanced search and filtering
          - **🔧 Complete Mod Management**: One-click installation and uninstallation with progress tracking
          - **🎨 Beautiful Interface**: Dark theme with responsive design
          - **🔔 Real-time Updates**: Live UI updates when mods are installed/uninstalled
          - **📱 Cross-platform**: Works on Windows and macOS
          
          ### 📋 System Requirements
          - **macOS**: macOS 10.15+ (ARM64 or Intel)
          - **Windows**: Windows 10+ (x64)
          - **Hollow Knight: Silksong**: Steam installation
          - **BepInEx**: Will be detected automatically
          
          ### 🐛 Known Issues
          - Some download hosts may require manual intervention
          - First launch may take longer due to initial setup
          - Some mods may require additional dependencies
          
          ### 🤝 Feedback
          This is a beta release! Please report any issues or suggestions on GitHub Issues.
          
          **Thank you for trying Silk Spool!** 🎮✨
        files: |
          artifacts/*/*.dmg
          artifacts/*/*.msi
          artifacts/*/*.app
        prerelease: ${{ github.event.inputs.prerelease }}
        draft: false
      env:
        GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
